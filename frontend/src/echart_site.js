const site1 = [
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "sand",
    "Substrate_2": "sand",
    "Substrate_3": "sand",
    "mean": 0.066848622
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "rubble",
    "Substrate_2": "rubble",
    "Substrate_3": "rubble",
    "mean": 0.062610385
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "unknown_hard_substrate",
    "Substrate_2": "unknown_hard_substrate",
    "Substrate_3": "unknown_hard_substrate",
    "mean": 0.117193177
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "algae_covered_substrate",
    "Substrate_2": "algae_covered_substrate",
    "Substrate_3": "algae_covered_substrate",
    "mean": 0.627728052
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_bleached",
    "Substrate_2": "branching_bleached",
    "Substrate_3": "branching_bleached",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_dead",
    "Substrate_2": "branching_dead",
    "Substrate_3": "branching_dead",
    "mean": 0.002423
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_alive",
    "Substrate_2": "branching_alive",
    "Substrate_3": "branching_alive",
    "mean": 0.00632837
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_alive",
    "Substrate_2": "branching_alive",
    "Substrate_3": "stylophora_alive",
    "mean": 0.011400629
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_alive",
    "Substrate_2": "branching_alive",
    "Substrate_3": "pocillopora_alive",
    "mean": 0.01809037
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_alive",
    "Substrate_2": "branching_alive",
    "Substrate_3": "acropora_alive",
    "mean": 0.002108955
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_alive",
    "Substrate_2": "branching_alive",
    "Substrate_3": "table_acropora_alive",
    "mean": 0.003998311
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_dead",
    "Substrate_2": "branching_dead",
    "Substrate_3": "table_acropora_dead",
    "mean": 0.000140101
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_alive",
    "Substrate_2": "branching_alive",
    "Substrate_3": "millepora_alive",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_alive",
    "Substrate_2": "massive/meandering_alive",
    "Substrate_3": "turbinaria_alive",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_bleached",
    "Substrate_2": "other_coral_bleached",
    "Substrate_3": "other_coral_bleached",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_dead",
    "Substrate_2": "other_coral_dead",
    "Substrate_3": "other_coral_dead",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_alive",
    "Substrate_2": "other_coral_alive",
    "Substrate_3": "other_coral_alive",
    "mean": 0.004114503
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_alive",
    "Substrate_2": "massive/meandering_alive",
    "Substrate_3": "massive/meandering_alive",
    "mean": 0.072843956
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_dead",
    "Substrate_2": "massive/meandering_dead",
    "Substrate_3": "massive/meandering_dead",
    "mean": 0.001217813
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_bleached",
    "Substrate_2": "massive/meandering_bleached",
    "Substrate_3": "massive/meandering_bleached",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_alive",
    "Substrate_2": "meandering_alive",
    "Substrate_3": "meandering_alive",
    "mean": 0.002953756
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_dead",
    "Substrate_2": "meandering_dead",
    "Substrate_3": "meandering_dead",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "coral_bleached",
    "Substrate_2": "meandering_bleached",
    "Substrate_3": "meandering_bleached",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "other_invertebrates",
    "Substrate_2": "sea_urchin",
    "Substrate_3": "sea_urchin",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "other_invertebrates",
    "Substrate_2": "sea_cucumber",
    "Substrate_3": "sea_cucumber",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "anemone",
    "Substrate_2": "anemone",
    "Substrate_3": "anemone",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "other_invertebrates",
    "Substrate_2": "sponge",
    "Substrate_3": "sponge",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "other_invertebrates",
    "Substrate_2": "clam",
    "Substrate_3": "clam",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "other_animal",
    "Substrate_2": "other_animal",
    "Substrate_3": "other_animal",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "trash",
    "Substrate_2": "trash",
    "Substrate_3": "trash",
    "mean": 0
  },
  {
    "id": 1,
    "Site": "djibouti_city",
    "Substrate_1": "other_invertebrates",
    "Substrate_2": "seagrass",
    "Substrate_3": "seagrass",
    "mean": 0
  }
]



const xAxisData = [
          'sand',
          'rubble',
          'unknown_hard_substrate',
          'algae_covered_substrate',
          'coral_bleached',
          'coral_dead',
          'coral_alive',
          'other_invertebrates',
          'anemone',
          'other_animal',
          'trash'
        ];
const colorData =[
        '#d4b483',
        '#a39081',
        '#828282',
        '#5b7065',
        '#fff1af',
        '#8b6b61',
        '#5c8374',
        '#9db2bf',
        '#526d82',
        '#27374d',
        '#000000'
      ] ;
function processData(data) {
  const seriesData = []
  data.forEach((item, index) => {
          if (xAxisData.includes(item.Substrate_1)) {
            if (seriesData[index] === undefined) {
              seriesData[index] = 0;
            }
            if (index !== undefined) {
              seriesData[index] += item.mean;
            }
          }
        });
  return seriesData.map((x, index) => ({
          value: x,
          itemStyle: {
            color: colorData[index]
          }
        }));
}

option = {
  xAxis: {
    type: 'category',
    data: xAxisData,
  },
  yAxis: {
    type: 'value',

  },
  series: [
    {
      data: processData(site1),
      type: 'bar',

    }
  ],

};
